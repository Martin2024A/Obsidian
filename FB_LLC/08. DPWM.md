```C
void init_dpwm0(void)
{
  Dpwm0Regs.DPWMCTRL0.bit.PWM_EN = 1;         //使能
  Dpwm0Regs.DPWMCTRL0.bit.MSYNC_SLAVE_EN = 1; //主从设置-从模式
  Dpwm0Regs.DPWMCTRL0.bit.BLANK_A_EN = 1;  //消隐A使能？逐周期作用，消隐B用到了吗//AB用于逐周期，B也可用于DPWMC
  Dpwm0Regs.DPWMCTRL0.bit.CLA_EN = 1;     //启用Filter       
  Dpwm0Regs.DPWMCTRL0.bit.PWM_MODE = NORMAL;  //模式选择
  Dpwm0Regs.DPWMCTRL0.bit.PWM_A_INTRA_MUX = BELOW_C;    //DPWM1C
  Dpwm0Regs.DPWMCTRL0.bit.PWM_B_INTRA_MUX = BELOW2_C;   //DPWM2C
  //RESON_MODE_FIXED_DUTY_EN = 0; default 0
  //-----------AUTOMID
  Dpwm0Regs.DPWMAUTOMID.bit.CLA_EN = 1;
  Dpwm0Regs.DPWMAUTOMID.bit.PWM_MODE = RESONANT;
  Dpwm0Regs.DPWMAUTOMID.bit.PWM_A_INTRA_MUX = PASS_THROUGH;
  Dpwm0Regs.DPWMAUTOMID.bit.PWM_B_INTRA_MUX = PASS_THROUGH;
  //-----------AUTOMAX
  Dpwm0Regs.DPWMAUTOMAX.bit.CLA_EN = 1;
  Dpwm0Regs.DPWMAUTOMAX.bit.PWM_MODE = RESONANT;
  Dpwm0Regs.DPWMAUTOMAX.bit.PWM_A_INTRA_MUX = PASS_THROUGH;
  Dpwm0Regs.DPWMAUTOMAX.bit.PWM_B_INTRA_MUX = PASS_THROUGH;

  Dpwm0Regs.DPWMCTRL1.bit.HIRES_DIS = 1;
  Dpwm0Regs.DPWMCTRL1.bit.CHECK_OVERRIDE = 1;
  Dpwm0Regs.DPWMCTRL1.bit.EVENT_UP_SEL = 1;
  Dpwm0Regs.DPWMCTRL1.bit.AUTO_MODE_SEL = 1;

  Dpwm0Regs.DPWMCTRL2.bit.FILTER_DUTY_SEL = 2;
  //dpwm中断，后续是否用到？
  Dpwm0Regs.DPWMINT.bit.PRD_INT_SCALE =2;//every 4 cycles
  Dpwm0Regs.DPWMINT.bit.PRD_INT_EN = 1;
}
```


```C

  Dpwm2Regs.DPWMCTRL0.bit.PWM_EN = 1;
  Dpwm2Regs.DPWMCTRL0.bit.MSYNC_SLAVE_EN = 0;//Maater
  Dpwm2Regs.DPWMCTRL0.bit.BLANK_A_EN = 1;
  Dpwm2Regs.DPWMCTRL0.bit.CLA_EN = 1;
  Dpwm2Regs.DPWMCTRL0.bit.PWM_MODE = NORMAL;
  Dpwm2Regs.DPWMCTRL0.bit.PWM_A_INTRA_MUX = EDGEGEN;  
  Dpwm2Regs.DPWMCTRL0.bit.PWM_B_INTRA_MUX = EDGEGEN;
```
边缘生成

```C
void init_dpwm2(void)

{

  Dpwm2Regs.DPWMCTRL0.bit.PWM_EN = 1;
  Dpwm2Regs.DPWMCTRL0.bit.MSYNC_SLAVE_EN = 0;//Maater
  Dpwm2Regs.DPWMCTRL0.bit.BLANK_A_EN = 1;
  Dpwm2Regs.DPWMCTRL0.bit.CLA_EN = 1;
  Dpwm2Regs.DPWMCTRL0.bit.PWM_MODE = NORMAL;
  Dpwm2Regs.DPWMCTRL0.bit.PWM_A_INTRA_MUX = EDGEGEN;  
  Dpwm2Regs.DPWMCTRL0.bit.PWM_B_INTRA_MUX = EDGEGEN;
  //-----------AUTOMID

  Dpwm2Regs.DPWMAUTOMID.bit.CLA_EN = 1;

  Dpwm2Regs.DPWMAUTOMID.bit.PWM_MODE = RESONANT;

  Dpwm2Regs.DPWMAUTOMID.bit.PWM_A_INTRA_MUX = BELOW_A;

  Dpwm2Regs.DPWMAUTOMID.bit.PWM_B_INTRA_MUX = BELOW_B;

  

  //-----------AUTOMAX

  Dpwm2Regs.DPWMAUTOMAX.bit.CLA_EN = 1;

  Dpwm2Regs.DPWMAUTOMAX.bit.PWM_MODE = RESONANT;

  Dpwm2Regs.DPWMAUTOMAX.bit.PWM_A_INTRA_MUX = BELOW_A;

  Dpwm2Regs.DPWMAUTOMAX.bit.PWM_B_INTRA_MUX = BELOW_B;

  

  Dpwm2Regs.DPWMCTRL1.bit.HIRES_DIS = 1;

  Dpwm2Regs.DPWMCTRL1.bit.CHECK_OVERRIDE = 1;

  Dpwm2Regs.DPWMCTRL1.bit.EVENT_UP_SEL = 1;

  Dpwm2Regs.DPWMCTRL1.bit.AUTO_MODE_SEL = 1;

  

  Dpwm2Regs.DPWMCTRL2.bit.FILTER_DUTY_SEL = 2;

  

  // ---------------- Edge-generation setup

  Dpwm2Regs.DPWMEDGEGEN.bit.A_ON_EDGE = CURRENT_POS_B;

  Dpwm2Regs.DPWMEDGEGEN.bit.A_OFF_EDGE = NEXT_NEG_A;

  Dpwm2Regs.DPWMEDGEGEN.bit.B_ON_EDGE = NEXT_POS_B;

  Dpwm2Regs.DPWMEDGEGEN.bit.B_OFF_EDGE = CURRENT_NEG_A;

  

  // When using edgegen, may need to enable all other DPWMS

  // to ensure same path delay, default is passthru on others (1234)

  Dpwm0Regs.DPWMEDGEGEN.bit.EDGE_EN = 1;

  Dpwm1Regs.DPWMEDGEGEN.bit.EDGE_EN = 1;

  Dpwm2Regs.DPWMEDGEGEN.bit.EDGE_EN = 1;

  Dpwm3Regs.DPWMEDGEGEN.bit.EDGE_EN = 1;

}
```

DPWM：
不同模式下，不同输出设置

谐振模式下：谐振模式下EVENT_1_REG和Filter输出FILTER_DUTY决定DPWM
* EV1 = EVENT_1_REG
* EV2 = EVENT_1_REG + PW
* EV3 = FILTER_DUTY + EVENT_1_REG
* EV4 = FILTER_DUTY + EVENT_1_REG + PW

* PW = FILTER_DUTY – 2* EVENT_1_REG
* FILTER_DUTY = PRD_DUTY/2

谐振模式设置：
EVENT_1_REG=deadtime1；filter输出影响PRD_DUTY
正常模式：
EVENT_1_REG = deadtime1；
EVENT_4_REG = Period - deadtime1；
EVENT_3_REG-EVENT_2_REG = 2 * deadtime1
Cycle_Adjust_A = -deadtime1
EV3要小于EV4 
多模式：
EVENT_1_REG = deadtime1；
EVENT_3_REG = Period/2+deadtime1
Cycle_Adjust_A = -deadtime1
Cycle_Adjust_B = -deadtime1

正常模式下：
周期确定

* EV1 = EVENT_1_REG
* EV2 = EVENT_1_REG + FILTER_DUTY+Cycle_Adjust_A
* EV3 = EVENT_1_REG +FILTER_DUTY+Cycle_Adjust_A+(EVENT_3_REG-EVENT_2_REG)
* EV4 = EVENT_4_REG

Multiple模式
* EV1 = EVENT_1_REG
* EV2 = EVENT_1_REG + FILTER_DUTY+Cycle_Adjust_A
* EV3 = EVENT_3_REG
* EV4 = EVENT_3_REG + FILTER_DUTY+Cycle_Adjust_B

```C
Filter0Regs.FILTERYNCLPLO.all = clamp_value;
Filter0Regs.FILTERYNCLPHI.all = ((int32)((pmbus_dcdc_config[0].min_period  << 4)* PID_PERIOD_FACTOR * 1026)) >> 10;
```


```C
//3步Duty cycle选择
Filter0Regs.FILTERCTRL.bit.OUTPUT_MULT_SEL = ;//选择4种来源

//DPWMx Period
LoopMuxRegs.FILTERMUX.bit.FILTER0_PER_SEL = 0;//选择DPWM period
Dpwm0Regs.DPWMPRD.bit.PRD = ;

// KComp
LoopMuxRegs.FILTERMUX.bit.FILTER0_KCOMP_SEL = 0;//选择Kcomp
LoopMuxRegs.FILTERKCOMPA.bit.KCOMP0 = ;//具体数值

//Resonant Duty
Dpwm0Regs.DPWMCTRL2.bit.FILTER_DUTY_SEL = ;//选择哪个寄存器发送到Filter谐振duty
Dpwm0Regs.DPWMRESDUTY.bit.RESONANT_DUTY = ;
```


```C
//Period 选择
Filter0Regs.FILTERCTRL.bit.PERIOD_MULT_SEL = 1; // Use KCOM

//KCOM
LoopMuxRegs.FILTERMUX.bit.FILTER0_KCOMP_SEL = 0;
LoopMuxRegs.FILTERKCOMPA.bit.KCOMP0 = pmbus_dcdc_config[0].max_period;

```

